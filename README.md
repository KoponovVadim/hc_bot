# Hangcha B2B Chat-Funnel Widget (Joomla 3)

Интерактивный чат-виджет для подбора промышленной техники Hangcha. Адаптирован для интеграции в Joomla 3.

## Описание

Виджет проводит пользователя через пошаговый сценарий подбора погрузчиков, складской техники, сервиса или консультации с менеджером. Поддерживает анимацию печати текста, валидацию ввода, AJAX-отправку данных и адаптивный дизайн.

### Основные возможности
- Ветки сценария: Подбор погрузчика, проверка наличия, складская техника, сервис/запчасти, вопрос менеджеру.
- Динамические переходы на основе ответов.
- Валидация email, телефона, чисел.
- AJAX POST в JSON на PHP-обработчик.

## Структура проекта

```
ханчабот/
├── hc-chat.js          # Основная логика чата
├── hc-chat.css         # Стили виджета
├── hc-chat.html        # HTML-разметка виджета
├── hc-chat.php         # PHP-обработчик для отправки данных
└── README.md           # Этот файл
```

## Требования

- Joomla 3.x или любой сайт с HTML/CSS/JS
- PHP 5.6+ для обработки форм
- Современные браузеры

## Установка и интеграция

1. Скопируйте файлы в папку сайта, например `/templates/your_template/hc_bot/`.

2. Подключите в шаблоне Joomla:
```html
<link rel="stylesheet" href="/templates/your_template/hc_bot/hc-chat.css">
<script src="/templates/your_template/hc_bot/hc-chat.js"></script>
```

3. Вставьте HTML-разметку из `hc-chat.html` в шаблон (перед `</body>`).

4. Настройте путь к `hc-chat.php` в `hc-chat.js` (строка около 577).

## Как работает

1. Пользователь кликает на кнопку открытия чата.
2. Чат задаёт вопросы, пользователь отвечает.
3. На финальном шаге данные отправляются AJAX на `hc-chat.php`.
4. Показывается сводка и благодарность.

## Настройка

- **Тексты**: Измените в массиве `steps` в `hc-chat.js`.
- **Стили**: Редактируйте `hc-chat.css`.
- **Логика**: Добавляйте шаги в `steps`.

### PHP-обработчик
Пример кода в `hc-chat.php`:
```php
<?php
header('Content-Type: application/json');
$data = json_decode(file_get_contents('php://input'), true);
mail('manager@company.com', 'Новая заявка', print_r($data, true));
echo json_encode(['status' => 'success']);
?>
```

## Безопасность

Валидация на клиенте базовая; проверяйте данные на сервере. Защитите от спама.

## Лицензия

Только для внутреннего использования компанией-заказчиком.

## Changelog
- v1.0: Базовая версия с ветками и AJAX.
